<parking-loading></parking-loading>
<div class="d-flex ">
    <nz-card nzTitle="VEHICLE MANAGEMENT IN THE PARKING LOT">
        <div class="d-flex flex-column">
            <div class="d-flex flex-row p-2">
                <div>
                    <div *ngIf="isCameraExist; else noCameraExist" class="camera">
                        <webcam class="mirrored" [height]="450" [width]="450" [trigger]="triggerObservableIn()"
                            (imageCapture)="handleImageIn($event)" *ngIf="showWebcamIn"
                            [switchCamera]="nextWebcamObservableIn()">
                        </webcam>
                    </div>

                    <ng-template #noCameraExist>
                        Camera Device not Available
                    </ng-template>
                </div>
                <div class="ml-2">
                    <img width="450" height="337" [src]="imageIn">
                </div>
            </div>
            <div class="d-flex flex-row">
                <div style="width: 450px;" class="ml-2 mr-2">
                    <div>
                        <h1>
                            Car information in
                        </h1>
                    </div>

                    <div>
                        <span *ngIf="isScan">License plate:
                            <mark style="color: green; background-color: white;"> {{ resultImageIn }}</mark>
                        </span>

                        <span *ngIf="!isScan">License plate: <mark>{{ resultImageIn }}</mark>
                        </span>
                    </div>

                    <div>
                        <span>
                            Customer type: {{typeCard}}
                        </span>
                    </div>

                    <div>
                        <span id="clock">
                            Time in: {{timeIn}}
                        </span>
                    </div>


                </div>
                <div style="width: 450px;" class="d-flex justify-content-between">
                    <button nz-button nzType="primary" (click)="capPictureIn()">
                        <i class="fa-solid fa-camera mr-2"></i>
                        Take a shot
                    </button>
                    <button class="ml-2" nz-button nzType="primary" (click)="takeCar()">
                        <i class="fa-solid fa-arrow-right mr-2"></i>
                        Take car
                    </button>
                </div>
            </div>
        </div>
    </nz-card>

    <nz-card class="ml-5" nzTitle="MANAGE THE CAR OUT OF THE PARKING LOT">
        <div class="d-flex flex-column">
            <div class="d-flex flex-row p-2">
                <div>
                    <div *ngIf="isCameraExist; else noCameraExist" class="camera">
                        <webcam class="mirrored" [height]="450" [width]="450" [trigger]="triggerObservableOut()"
                            (imageCapture)="handleImageOut($event)" *ngIf="showWebcamOut"
                            [switchCamera]="nextWebcamObservableOut()">
                        </webcam>
                    </div>

                    <ng-template #noCameraExist>
                        Camera Device not Available
                    </ng-template>
                </div>
                <div class="ml-2">
                    <img width="450" height="337" [src]="carOutDto.imgCarIn">
                </div>
            </div>
            <div class="d-flex flex-row">
                <div style="width: 450px;" class="ml-2 mr-2">
                    <div>
                        <h1>
                            Car information out
                        </h1>
                    </div>

                    <div>
                        <span *ngIf="isScan">License plate:
                            <mark style="color: green; background-color: white;"> {{ resultImageOut }}</mark>
                        </span>

                        <span *ngIf="!isScan">License plate: <mark>{{ resultImageOut }}</mark>
                        </span>
                    </div>

                    <div>
                        <span>
                            Customer type: {{carOutDto.typeCard != null ? (carOutDto.typeCard == 1 ? 'Khách hàng tháng'
                            :'Khách hàng vãng lai') : ''}}
                        </span>
                    </div>

                    <div>
                        <span>
                            Time in: {{timeOut}}
                        </span>
                    </div>

                    <div>
                        <span>
                            Time out: {{timeOut1}}
                        </span>
                    </div>

                    <div>
                        <span>
                            Time total: {{totalTime}}
                        </span>
                    </div>

                    <div>
                        <span>
                            Parking fee: 20.000 VND
                        </span>
                    </div>
                </div>
                <div style="width: 450px;" class="d-flex justify-content-between">
                    <div>
                        <button nz-button nzType="primary" (click)="capPictureOut()">
                            <i class="fa-solid fa-camera mr-2"></i>
                            Take a shot
                        </button>
                    </div>
                    <div class="ml-2">
                        <button nz-button nzType="primary" (click)="carOut()">
                            <i class="fa-solid fa-arrow-left mr-2"></i>
                            Export car
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nz-card>
</div>